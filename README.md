# ุณุณุชู ุฌุณุชุฌู ุฑูุฒูฺฏุงุฑ ููููุฑูฺฉ (FHE Search System)

![Alt text](https://raw.githubusercontent.com/nerdznj/FHE_Search_System/refs/heads/main/image.jpg)
ฺฉ ููุชูุฑ ุฌุณุชุฌู ูพุดุฑูุชู ู ฺูุฏุฒุจุงูู ุจุง ูุงุจูุช ุญูุธ ุญุฑู ุฎุตูุต ฺฉู ุงุฒ ุชฺฉูฺฉโูุง ุฑูุฒูฺฏุงุฑ ููููุฑูฺฉ ฺฉุงูู (FHE) ู ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุน ุงุณุชูุงุฏู ูโฺฉูุฏ.

## ูฺฺฏโูุง ฺฉูุฏ

๐ **ุฑูุฒูฺฏุงุฑ ููููุฑูฺฉ**: ุงูฺฉุงู ุฌุณุชุฌู ุฑู ุฏุงุฏูโูุง ุฑูุฒุดุฏู ุจุฏูู ูุงุฒ ุจู ุฑูุฒฺฏุดุง  
๐ **ูพุดุชุจุงู ฺูุฏุฒุจุงูู**: ูุงุฑุณุ ุนุฑุจุ ุงูฺฏูุณ ู ูุชูู ูุฎุชูุท  
๐ **ุฌุณุชุฌู ูุนูุง**: ุงุณุชูุงุฏู ุงุฒ TF-IDF ุจุฑุง ุงูุชู ูุญุชูุง ูุฑุชุจุท  
๐ **ุฎูุดูโุจูุฏ ููุดููุฏ**: ฺฏุฑููโุจูุฏ ุฎูุฏฺฉุงุฑ ุงุณูุงุฏ ูุดุงุจู  
๐พ **ุฐุฎุฑูโุณุงุฒ ูพุงุฏุงุฑ**: ูพุงฺฏุงู ุฏุงุฏู SQLite ุจุฑุง ูฺฏูุฏุงุฑ ุงุทูุงุนุงุช  
โก **ุนููฺฉุฑุฏ ุจุงูุง**: ูพุฑุฏุงุฒุด ุฏุณุชูโุง ู ุจูููโุณุงุฒ ุณุฑุนุช  
๐ **ุขูุงูุชฺฉ ฺฉุงูู**: ุขูุงุฑฺฏุฑ ู ูุธุงุฑุช ุจุฑ ุนููฺฉุฑุฏ ุณุณุชู

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง

- Python 3.8 ุง ุจุงูุงุชุฑ
- ุญุฏุงูู 4GB RAM
- ูุถุง ุฐุฎุฑูโุณุงุฒ: 1GB

### ูุตุจ ูุงุจุณุชฺฏโูุง

```bash
pip install -r requirements.txt
```

### ุฑุงูโุงูุฏุงุฒ ุณุฑุน

```python
from fhe_search import FHESearchEngine

# ุงุฌุงุฏ ููููู ุณุณุชู
engine = FHESearchEngine()

# ุงูุฒูุฏู ุงุณูุงุฏ
documents = [
    "ุงุฏฺฏุฑ ูุงุดู ุดุงุฎู ููู ุงุฒ ููุด ูุตููุน ุงุณุช",
    "Machine learning is a subset of artificial intelligence",
    "ุงููุช ุฏุงุฏูโูุง ุฏุฑ ูุถุง ุงุจุฑ ุงููุช ุฏุงุฑุฏ"
]

result = engine.add_documents(documents)
print(f"โ {result['processed_documents']} ุณูุฏ ูพุฑุฏุงุฒุด ุดุฏ")

# ุฌุณุชุฌู
search_result = engine.search("ููุด ูุตููุน", top_k=5)
for i, result in enumerate(search_result['results'], 1):
    score = result['similarity_score']
    text = result['metadata']['original_text']
    print(f"{i}. ุงูุชุงุฒ: {score:.3f} - {text}")
```

## ุฑุงูููุง ุงุณุชูุงุฏู

### 1. ุฑุงูโุงูุฏุงุฒ ุจุง ูุงู ูพฺฉุฑุจูุฏ

```python
# ุงุฌุงุฏ ูุงู config.json
config = {
    "max_features": 1500,
    "ngram_range": [1, 3],
    "enable_clustering": True,
    "cluster_count": 8
}

engine = FHESearchEngine(config_file='config.json')
```

### 2. ุงูุฒูุฏู ุงุณูุงุฏ ุจุง ูุชุงุฏุชุง

```python
documents = ["ูุชู ุณูุฏ ุงูู", "ูุชู ุณูุฏ ุฏูู"]
metadata = [
    {"category": "technology", "priority": "high"},
    {"category": "research", "priority": "medium"}
]

result = engine.add_documents(documents, metadata)
```

### 3. ุฌุณุชุฌู ูพุดุฑูุชู ุจุง ููุชุฑ

```python
# ุฌุณุชุฌู ููุท ุฏุฑ ุงุณูุงุฏ ูุงุฑุณ
result = engine.search(
    "ุฑูุฒูฺฏุงุฑ", 
    top_k=10,
    filters={'language': 'persian'}
)

# ุฌุณุชุฌู ุฏุฑ ุฎูุดู ุฎุงุต
result = engine.search(
    "security", 
    filters={'cluster_id': 2}
)
```

### 4. ูุฏุฑุช ุฏุงุฏูโูุง

```python
# ุตุงุฏุฑุงุช ุงุทูุงุนุงุช ุณุณุชู
engine.export_system_data("backup.json", include_vectors=True)

# ูุงุฑุฏ ฺฉุฑุฏู ุฏุงุฏูโูุง
engine.import_system_data("backup.json")

# ุฏุฑุงูุช ุขูุงุฑ ฺฉุงูู
status = engine.get_system_status()
print(f"ุชุนุฏุงุฏ ุงุณูุงุฏ: {status['system_info']['total_documents']}")
```

## ูุนูุงุฑ ุณุณุชู

### ฺฉูุงุณโูุง ุงุตู

- **`FHESearchEngine`**: ููุชูุฑ ุงุตู ุฌุณุชุฌู
- **`PersianTextProcessor`**: ูพุฑุฏุงุฒุด ูุชูู ฺูุฏุฒุจุงูู
- **`DatabaseManager`**: ูุฏุฑุช ูพุงฺฏุงู ุฏุงุฏู
- **`FHEManager`**: ูุฏุฑุช ุฑูุฒูฺฏุงุฑ ููููุฑูฺฉ

### ูุฑุขูุฏ ูพุฑุฏุงุฒุด

1. **ุชุดุฎุต ุฒุจุงู**: ุดูุงุณุง ุฎูุฏฺฉุงุฑ ุฒุจุงู ูุชู
2. **ูพุดโูพุฑุฏุงุฒุด**: ูุฑูุงูโุณุงุฒ ู ูพุงฺฉโุณุงุฒ
3. **ุงุณุชุฎุฑุงุฌ ูฺฺฏ**: ุชุจุฏู ุจู ุจุฑุฏุงุฑ TF-IDF
4. **ุฑูุฒูฺฏุงุฑ**: ุงููโุณุงุฒ ุฏุงุฏูโูุง ุจุง CKKS
5. **ุฎูุดูโุจูุฏ**: ฺฏุฑููโุจูุฏ ุงุณูุงุฏ ูุดุงุจู
6. **ุฐุฎุฑูโุณุงุฒ**: ูฺฏูุฏุงุฑ ุฏุฑ ูพุงฺฏุงู ุฏุงุฏู

## ูุซุงูโูุง ฺฉุงุฑุจุฑุฏ

### ุณุณุชู ูุฏุฑุช ุงุณูุงุฏ

```python
# ุงูุฒูุฏู ูุฌููุนู ุงุณูุงุฏ ุงุฏุงุฑ
office_docs = [
    "ฺฏุฒุงุฑุด ูุฑูุด ูุงู ุฌุงุฑ ุดุฑฺฉุช",
    "ุฏุณุชูุฑุงูุนูู ุงููุช ุณุงุจุฑ",
    "ุจุฑูุงูู ุชูุณุนู ูุญุตููุงุช ุฌุฏุฏ"
]

engine.add_documents(office_docs)

# ุฌุณุชุฌู ุฏุฑ ุงุณูุงุฏ
results = engine.search("ฺฏุฒุงุฑุด ูุฑูุด", top_k=3)
```

### ุณุณุชู ุฌุณุชุฌู ุนูู

```python
# ุงูุฒูุฏู ููุงูุงุช ุนูู
papers = [
    "Deep learning applications in medical diagnosis",
    "ฺฉุงุฑุจุฑุฏ ุงุฏฺฏุฑ ุนูู ุฏุฑ ุชุดุฎุต ูพุฒุดฺฉ",
    "Quantum computing and cryptography"
]

engine.add_documents(papers)

# ุฌุณุชุฌู ูุชูุงุจู ุงูฺฏูุณ-ูุงุฑุณ
en_results = engine.search("medical diagnosis")
fa_results = engine.search("ุชุดุฎุต ูพุฒุดฺฉ")
```

## ุชูุธูุงุช ูพุดุฑูุชู

### ูพุงุฑุงูุชุฑูุง ุฑูุฒูฺฏุงุฑ

```json
{
  "encryption": {
    "poly_modulus_degree": 16384,
    "coeff_modulus": [60, 40, 40, 40, 60],
    "scale": 1099511627776
  }
}
```

### ุจูููโุณุงุฒ ุนููฺฉุฑุฏ

```json
{
  "max_features": 2000,
  "batch_size": 100,
  "search": {
    "min_similarity_threshold": 0.02,
    "default_top_k": 10
  }
}
```

## ุขุฒูุงุด ุนููฺฉุฑุฏ

ุจุฑุง ุงุฌุฑุง ุชุณุชโูุง ุนููฺฉุฑุฏ:

```bash
python example_usage.py
```

ูุชุงุฌ ูุนููู:
- ุณุฑุนุช ูพุฑุฏุงุฒุด: ~50 ุณูุฏ/ุซุงูู
- ุฒูุงู ุฌุณุชุฌู: <50 ููโุซุงูู
- ุฏูุช ุฌุณุชุฌู: >85%

## ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ

**ุฎุทุง ูุตุจ TenSEAL:**
```bash
# ุฑู ุณุณุชูโูุง Linux
sudo apt-get install build-essential cmake
pip install tenseal --no-cache-dir
```

**ูุดฺฉู encoding ูุงุฑุณ:**
```python
# ุงุทููุงู ุงุฒ UTF-8
import locale
locale.setlocale(locale.LC_ALL, 'fa_IR.UTF-8')
```

**ฺฉูุฏ ุฏุฑ ุฑูุฒูฺฏุงุฑ:**
- ูพุงุฑุงูุชุฑ `poly_modulus_degree` ุฑุง ฺฉุงูุด ุฏูุฏ
- `max_size` ุฏุฑ ุฑูุฒูฺฏุงุฑ ุจุฑุฏุงุฑูุง ุฑุง ูุญุฏูุฏ ฺฉูุฏ

### ูุงฺฏโฺฏุฑ

ุณุณุชู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุงฺฏโูุง ููุตู ุฏุฑ `fhe_search.log` ุฐุฎุฑู ูโฺฉูุฏ:

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

## ูุดุงุฑฺฉุช ุฏุฑ ุชูุณุนู

### ุณุงุฎุชุงุฑ ูพุฑูฺู

```
FHE_Search_System/
โโโ fhe_search.py          # ฺฉุฏ ุงุตู ุณุณุชู
โโโ example_usage.py       # ูุซุงูโูุง ุงุณุชูุงุฏู
โโโ config.json           # ูุงู ูพฺฉุฑุจูุฏ
โโโ requirements.txt      # ูุงุจุณุชฺฏโูุง
โโโ README.md            # ูุณุชูุฏุงุช
```

### ุงุถุงูู ฺฉุฑุฏู ูฺฺฏ ุฌุฏุฏ

1. Fork ฺฉุฑุฏู ูพุฑูฺู
2. ุงุฌุงุฏ branch ุฌุฏุฏ
3. ูพุงุฏูโุณุงุฒ ูฺฺฏ
4. ููุดุชู ุชุณุช
5. ุงุฑุณุงู Pull Request

## ูุฌูุฒ ู ุญููู

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ููุชุดุฑ ุดุฏู ุงุณุช. ุงุณุชูุงุฏูุ ุชุบุฑ ู ุชูุฒุน ุขุฒุงุฏ ุงุณุช.

## ุชูุงุณ ู ูพุดุชุจุงู

- **ููุณูุฏู**: ุงูู ุชู ุจฺฏูู
- **ูุจโุณุงุช**: https://nerdznj.ir

## ุชุบุฑุงุช ูุณุฎูโูุง

### v1.0.0 (2024-01-15)
- ูพุงุฏูโุณุงุฒ ุงููู ุณุณุชู FHE
- ูพุดุชุจุงู ุงุฒ ุฒุจุงูโูุง ูุงุฑุณุ ุนุฑุจุ ุงูฺฏูุณ
- ุฑูุฒูฺฏุงุฑ CKKS ู ุฌุณุชุฌู ูุนูุง
- ุฎูุดูโุจูุฏ ุฎูุฏฺฉุงุฑ ู ูพุงฺฏุงู ุฏุงุฏู SQLite

---

**โญ ุงฺฏุฑ ุงู ูพุฑูฺู ุจุฑุงุชุงู ููุฏ ุจูุฏุ ูุทูุงู ุณุชุงุฑู ุจุฏูุฏ**
